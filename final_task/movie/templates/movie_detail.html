<!-- movie_detail.html -->

{% extends 'base.html' %}
{% load static %}

{% block content %}


<br>

<div class="container-fluid">
<div class="card mb-3" style="background-color:#E5E8E8;">
  <img src="{{ movie.image.url }}" class="card-img-top" alt="{{ movie.title }}" style="height:500px;">
  <div class="card-body">
    <h5 class="card-title">{{ movie.title }}</h5>
    <p class="card-text">{{ movie.description }}</p>
    <p>Lead Actor: {{ movie.lead_actor }}</p>
            <p>Lead Actress: {{ movie.lead_actress }}</p>
            <p>Release Date: {{ movie.release_date }}</p>
            <p class="card-text">Genres:
                            {% for genre in movie.genres.all %}
                                {{ genre.name }}{% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </p>
            <a class="btn btn-primary" href="{{ movie.trailer_link }}">Trailer</a>

            <div style="margin-top: 10px;">
                {% if user.is_authenticated and movie.user == user %}
        <!-- Show edit and delete options -->
                <a class="btn btn-secondary" href="{% url 'movie_app:edit_movie' movie.id %}">Edit</a>
                <a class="btn btn-danger" href="{% url 'movie_app:delete_movie' movie.id %}">Delete</a>
                {% endif %}

                </div><br>
      <div class="card-footer" style="background-color:#E5E8E8;">
                <h6>User Reviews:</h6>
                {% if movie.reviewrating_set.all %}
                    <div class="reviews">
                        {% for review in movie.reviewrating_set.all %}
                            <p>{{ review.title }}
                            <p>Comment: {{ review.content }}</p>
                                Rating:
                                {% for _ in "x"|ljust:review.rating %}
                                    <span class="star">&#9733;</span>
                                {% endfor %}

                            </p>

                </p>

                <!-- Add edit and delete buttons for the review -->
                {% if user.is_authenticated and review.user == user %}
                    <a class="btn btn-secondary" href="{% url 'movie_app:edit_review' review.pk %}">Edit Review</a>
                    <a class="btn btn-danger" href="{% url 'movie_app:delete_review' review.pk %}">Delete Review</a>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <p>No reviews yet.</p>
    {% endif %}
</div>



  </div>
</div>
</div>


<!--<br>-->
<!--<div class="container">-->
<!--    <div class="card bg-dark text-white">-->
<!--        <div class="card-body">-->
<!--            <h3 class="card-title">{{ movie.title }}</h3>-->
<!--            <img src="{{ movie.image.url }}" alt="{{ movie.title }}" class="img-fluid">-->
<!--            <p>{{ movie.description }}</p>-->
<!--            <p>Lead Actor: {{ movie.lead_actor }}</p>-->
<!--            <p>Lead Actress: {{ movie.lead_actress }}</p>-->
<!--            <p>Release Date: {{ movie.release_date }}</p>-->
<!--            <p class="card-text">Genres:-->
<!--                            {% for genre in movie.genres.all %}-->
<!--                                {{ genre.name }}{% if not forloop.last %}, {% endif %}-->
<!--                            {% endfor %}-->
<!--                        </p>-->
<!--            <a class="btn btn-primary" href="{{ movie.trailer_link }}">Trailer</a>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
{% endblock %}
